{"ast":null,"code":"var _jsxFileName = \"/home/whitney/phase-4/E-COMMERCE-APP/ECOMMERCE-PROJECT/client/src/components/Categories.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport { useNavigate, Link } from 'react-router-dom';\nimport { useAuth } from '../auth';\n// import Category from './Category';\n// import { Modal, Form, Button, Table } from 'react-bootstrap';\nimport { useForm } from 'react-hook-form';\n// import Searchbar from './Searchbar'; \nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n/*#__PURE__*/_jsxDEV(Link, {\n  to: \"/some-route\",\n  children: \"Some Link\"\n}, void 0, false, {\n  fileName: _jsxFileName,\n  lineNumber: 9,\n  columnNumber: 1\n}, this);\nconst LoggedInHome = () => {\n  _s();\n  const [categories, setCategories] = useState([]);\n  const [show, setShow] = useState(false);\n  const [deleteshow, setDeleteShow] = useState(false);\n  const [categoryId, setCategoryId] = useState(0);\n  const [searchbar, setSearchbar] = useState('');\n  const {\n    register,\n    setValue,\n    handleSubmit,\n    formState: {\n      errors\n    }\n  } = useForm();\n  const navigate = useNavigate();\n  const inputChangeHandler = e => {\n    const inputValue = e.target.value;\n    setSearchbar(inputValue);\n  };\n  const getAllCategories = () => {\n    return fetch('/category/categories').then(res => res.json()).then(data => {\n      setCategories(data);\n    }).catch(err => console.log(err));\n  };\n  const filteredCategories = search => {\n    const object = {\n      input: search\n    };\n    const requestData = {\n      method: 'POST',\n      headers: {\n        'content-type': 'application/json',\n        Authorization: `Bearer ${JSON.parse(token)}`\n      },\n      body: JSON.stringify(object)\n    };\n    fetch('/category/search', requestData).then(res => res.json()).then(data => {\n      setCategories(data);\n    }).catch(err => console.log(err));\n  };\n  const getAllCategoriesSearch = () => {\n    filteredCategories(searchbar);\n    setSearchbar('');\n  };\n  useEffect(() => {\n    getAllCategories();\n  }, []);\n  const closeModal = () => {\n    setShow(false);\n  };\n  const closeModalDelete = () => {\n    setDeleteShow(false);\n  };\n  const deleteModal = id => {\n    setDeleteShow(true);\n    setCategoryId(id);\n  };\n  const showModal = id => {\n    setShow(true);\n    setCategoryId(id);\n    categories.forEach((category, key) => {\n      if (category.id === id) {\n        setValue('name', category.name);\n      }\n    });\n  };\n  let token = localStorage.getItem('REACT_TOKEN_AUTH_KEY');\n  const updateCategory = data => {\n    try {\n      const requestData = {\n        method: 'PUT',\n        headers: {\n          'content-type': 'application/json',\n          Authorization: `Bearer ${JSON.parse(token)}`\n        },\n        body: JSON.stringify(data)\n      };\n      fetch(`/category/category/${categoryId}`, requestData).then(res => res.json()).then(data => {\n        navigate('/home');\n      }).catch(err => console.log(err));\n    } catch (error) {\n      console.log(error);\n    }\n  };\n  const deleteCategory = id => {\n    try {\n      const requestData = {\n        method: 'DELETE',\n        headers: {\n          'content-type': 'application/json',\n          Authorization: `Bearer ${JSON.parse(token)}`\n        }\n      };\n      fetch(`/category/category/${id}`, requestData).then(res => res.json()).then(data => {\n        getAllCategories();\n        setDeleteShow(false);\n      }).catch(err => console.log(err));\n    } catch (error) {\n      console.log(error);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"categories container-fluid lm_main\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 143,\n    columnNumber: 5\n  }, this);\n};\n_s(LoggedInHome, \"V7ScxxABDazcevcDRau0YxCluEU=\", false, function () {\n  return [useForm, useNavigate];\n});\n_c = LoggedInHome;\nconst LoggedOutHome = () => {\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"users\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Categorie Non Loggato\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Link, {\n      className: \"btn btn-primary btn-lg btn-submit\",\n      to: \"/signup\",\n      children: \"Signup\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 151,\n    columnNumber: 5\n  }, this);\n};\n_c2 = LoggedOutHome;\nconst Categories = () => {\n  _s2();\n  const [logged] = useAuth();\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: logged ? /*#__PURE__*/_jsxDEV(LoggedInHome, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 17\n    }, this) : /*#__PURE__*/_jsxDEV(LoggedOutHome, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 36\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 163,\n    columnNumber: 5\n  }, this);\n};\n_s2(Categories, \"5Y9U7DPWk0Y/1IN/jyjARKvkVgI=\", false, function () {\n  return [useAuth];\n});\n_c3 = Categories;\nexport default Categories;\nvar _c, _c2, _c3;\n$RefreshReg$(_c, \"LoggedInHome\");\n$RefreshReg$(_c2, \"LoggedOutHome\");\n$RefreshReg$(_c3, \"Categories\");","map":{"version":3,"names":["React","useEffect","useState","useNavigate","Link","useAuth","useForm","jsxDEV","_jsxDEV","to","children","fileName","_jsxFileName","lineNumber","columnNumber","LoggedInHome","_s","categories","setCategories","show","setShow","deleteshow","setDeleteShow","categoryId","setCategoryId","searchbar","setSearchbar","register","setValue","handleSubmit","formState","errors","navigate","inputChangeHandler","e","inputValue","target","value","getAllCategories","fetch","then","res","json","data","catch","err","console","log","filteredCategories","search","object","input","requestData","method","headers","Authorization","JSON","parse","token","body","stringify","getAllCategoriesSearch","closeModal","closeModalDelete","deleteModal","id","showModal","forEach","category","key","name","localStorage","getItem","updateCategory","error","deleteCategory","className","_c","LoggedOutHome","_c2","Categories","_s2","logged","_c3","$RefreshReg$"],"sources":["/home/whitney/phase-4/E-COMMERCE-APP/ECOMMERCE-PROJECT/client/src/components/Categories.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { useNavigate, Link } from 'react-router-dom';\nimport { useAuth } from '../auth';\n// import Category from './Category';\n// import { Modal, Form, Button, Table } from 'react-bootstrap';\nimport { useForm } from 'react-hook-form';\n// import Searchbar from './Searchbar'; \n\n<Link to=\"/some-route\">Some Link</Link>\n\nconst LoggedInHome = () => {\n  const [categories, setCategories] = useState([]);\n  const [show, setShow] = useState(false);\n  const [deleteshow, setDeleteShow] = useState(false);\n  const [categoryId, setCategoryId] = useState(0);\n  const [searchbar, setSearchbar] = useState('');\n\n  const {\n    register,\n    setValue,\n    handleSubmit,\n    formState: { errors },\n  } = useForm();\n\n  const navigate = useNavigate();\n\n  const inputChangeHandler = (e) => {\n    const inputValue = e.target.value;\n    setSearchbar(inputValue);\n  };\n\n  const getAllCategories = () => {\n    return fetch('/category/categories')\n      .then((res) => res.json())\n      .then((data) => {\n        setCategories(data);\n      })\n      .catch((err) => console.log(err));\n  };\n\n  const filteredCategories = (search) => {\n    const object = {\n      input: search,\n    };\n\n    const requestData = {\n      method: 'POST',\n      headers: {\n        'content-type': 'application/json',\n        Authorization: `Bearer ${JSON.parse(token)}`,\n      },\n      body: JSON.stringify(object),\n    };\n\n    fetch('/category/search', requestData)\n      .then((res) => res.json())\n      .then((data) => {\n        setCategories(data);\n      })\n      .catch((err) => console.log(err));\n  };\n\n  const getAllCategoriesSearch = () => {\n    filteredCategories(searchbar);\n    setSearchbar('');\n  };\n\n  useEffect(() => {\n    getAllCategories();\n  }, []);\n\n  const closeModal = () => {\n    setShow(false);\n  };\n\n  const closeModalDelete = () => {\n    setDeleteShow(false);\n  };\n\n  const deleteModal = (id) => {\n    setDeleteShow(true);\n    setCategoryId(id);\n  };\n\n  const showModal = (id) => {\n    setShow(true);\n    setCategoryId(id);\n\n    categories.forEach((category, key) => {\n      if (category.id === id) {\n        setValue('name', category.name);\n      }\n    });\n  };\n\n  let token = localStorage.getItem('REACT_TOKEN_AUTH_KEY');\n\n  const updateCategory = (data) => {\n    try {\n      const requestData = {\n        method: 'PUT',\n        headers: {\n          'content-type': 'application/json',\n          Authorization: `Bearer ${JSON.parse(token)}`,\n        },\n        body: JSON.stringify(data),\n      };\n\n      fetch(`/category/category/${categoryId}`, requestData)\n        .then((res) => res.json())\n        .then((data) => {\n          navigate('/home');\n        })\n        .catch((err) => console.log(err));\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  const deleteCategory = (id) => {\n    try {\n      const requestData = {\n        method: 'DELETE',\n        headers: {\n          'content-type': 'application/json',\n          Authorization: `Bearer ${JSON.parse(token)}`,\n        },\n      };\n\n      fetch(`/category/category/${id}`, requestData)\n        .then((res) => res.json())\n        .then((data) => {\n          getAllCategories();\n          setDeleteShow(false);\n        })\n        .catch((err) => console.log(err));\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  return (\n    <div className=\"categories container-fluid lm_main\">\n      {/* ... */}\n    </div>\n  );\n};\n\nconst LoggedOutHome = () => {\n  return (\n    <div className=\"users\">\n      <h1>Categorie Non Loggato</h1>\n      <Link className=\"btn btn-primary btn-lg btn-submit\" to=\"/signup\">\n        Signup\n      </Link>\n    </div>\n  );\n};\n\nconst Categories = () => {\n  const [logged] = useAuth();\n  return (\n    <div>\n      {logged ? <LoggedInHome /> : <LoggedOutHome />}\n    </div>\n  );\n};\n\n           \n\n\nexport default Categories;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}